{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp2\\\\htdocs\\\\dashboard\\\\prasad\\\\frontend-react\\\\src\\\\components\\\\Cart.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { removeFromCart, clearCart } from '../actions/cartActions';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst stripePromise = loadStripe(\"pk_test_Ndt6TQdeDbm8enBTo5P2T1gR001jPUPCNy\"); // Replace with your Stripe Publishable Key\n\nconst Cart = () => {\n  _s();\n  const cart = useSelector(state => state.cart);\n  const dispatch = useDispatch();\n\n  // Function to handle payment\n  const handlePayment = async () => {\n    const stripe = await stripePromise;\n\n    // Make sure this URL points to your actual backend\n    const response = await fetch('http://localhost:7000/create-checkout-session', {\n      // Ensure URL is correct\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        items: cart.products.map(product => ({\n          price_data: {\n            currency: 'usd',\n            product_data: {\n              name: product.name\n            },\n            unit_amount: product.price * 100 // Stripe uses cents\n          },\n          quantity: product.quantity\n        }))\n      })\n    });\n    if (!response.ok) {\n      throw new Error(`Failed to create checkout session: ${response.statusText}`);\n    }\n    const session = await response.json();\n\n    // Redirect to Stripe Checkout\n    const {\n      error\n    } = await stripe.redirectToCheckout({\n      sessionId: session.id\n    });\n    if (error) {\n      console.error('Error during Stripe Checkout:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-center\",\n      children: \"Your Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), cart.products.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center\",\n      children: \"Cart is empty\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"list-group\",\n      children: cart.products.map(product => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list-group-item d-flex justify-content-between align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [product.name, \" - $\", product.price, \" x \", product.quantity]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger btn-sm\",\n          onClick: () => dispatch(removeFromCart(product.id)),\n          children: \"Remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 15\n        }, this)]\n      }, product.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"mt-3\",\n      children: [\"Total: $\", cart.totalAmount.toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-warning mt-3\",\n      onClick: () => dispatch(clearCart()),\n      children: \"Clear Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), cart.products.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-3\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: handlePayment,\n        children: \"Pay Now\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(Cart, \"ecWlw9hQmiN1BKXN3G5mczU/ZzA=\", false, function () {\n  return [useSelector, useDispatch];\n});\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useSelector","useDispatch","removeFromCart","clearCart","loadStripe","jsxDEV","_jsxDEV","stripePromise","Cart","_s","cart","state","dispatch","handlePayment","stripe","response","fetch","method","headers","body","JSON","stringify","items","products","map","product","price_data","currency","product_data","name","unit_amount","price","quantity","ok","Error","statusText","session","json","error","redirectToCheckout","sessionId","id","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","onClick","totalAmount","toFixed","_c","$RefreshReg$"],"sources":["C:/xampp2/htdocs/dashboard/prasad/frontend-react/src/components/Cart.tsx"],"sourcesContent":["import React from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { removeFromCart, clearCart } from '../actions/cartActions';\r\nimport { RootState } from '../store';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\n\r\nconst stripePromise = loadStripe(\"pk_test_Ndt6TQdeDbm8enBTo5P2T1gR001jPUPCNy\"); // Replace with your Stripe Publishable Key\r\n\r\nconst Cart = () => {\r\n  const cart = useSelector((state: RootState) => state.cart);\r\n  const dispatch = useDispatch();\r\n\r\n  // Function to handle payment\r\n  const handlePayment = async () => {\r\n    const stripe = await stripePromise;\r\n    \r\n    // Make sure this URL points to your actual backend\r\n    const response = await fetch('http://localhost:7000/create-checkout-session', { // Ensure URL is correct\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        items: cart.products.map(product => ({\r\n          price_data: {\r\n            currency: 'usd',\r\n            product_data: {\r\n              name: product.name,\r\n            },\r\n            unit_amount: product.price * 100, // Stripe uses cents\r\n          },\r\n          quantity: product.quantity,\r\n        })),\r\n      }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to create checkout session: ${response.statusText}`);\r\n    }\r\n\r\n    const session = await response.json();\r\n\r\n    // Redirect to Stripe Checkout\r\n    const { error } = await stripe.redirectToCheckout({\r\n      sessionId: session.id,\r\n    });\r\n\r\n    if (error) {\r\n      console.error('Error during Stripe Checkout:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-4\">\r\n      <h2 className=\"text-center\">Your Cart</h2>\r\n      {cart.products.length === 0 ? (\r\n        <p className=\"text-center\">Cart is empty</p>\r\n      ) : (\r\n        <ul className=\"list-group\">\r\n          {cart.products.map((product) => (\r\n            <li key={product.id} className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n              <div>\r\n                {product.name} - ${product.price} x {product.quantity}\r\n              </div>\r\n              <button\r\n                className=\"btn btn-danger btn-sm\"\r\n                onClick={() => dispatch(removeFromCart(product.id))}\r\n              >\r\n                Remove\r\n              </button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      <h3 className=\"mt-3\">Total: ${cart.totalAmount.toFixed(2)}</h3>\r\n      <button className=\"btn btn-warning mt-3\" onClick={() => dispatch(clearCart())}>\r\n        Clear Cart\r\n      </button>\r\n      {cart.products.length > 0 && (\r\n        <div className=\"mt-3\">\r\n          <button className=\"btn btn-primary\" onClick={handlePayment}>Pay Now</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}